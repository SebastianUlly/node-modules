{"code":"(window.webpackJsonp=window.webpackJsonp||[]).push([[4],{400:function(t,e,r){\"use strict\";r.d(e,\"f\",(function(){return y})),r.d(e,\"h\",(function(){return p})),r.d(e,\"e\",(function(){return b})),r.d(e,\"g\",(function(){return O})),r.d(e,\"b\",(function(){return g})),r.d(e,\"i\",(function(){return v})),r.d(e,\"j\",(function(){return m})),r.d(e,\"d\",(function(){return I})),r.d(e,\"a\",(function(){return j})),r.d(e,\"k\",(function(){return w})),r.d(e,\"c\",(function(){return D}));r(27),r(56),r(99),r(47),r(49),r(15),r(69),r(420),r(66),r(74),r(421),r(422),r(423),r(424),r(425),r(426),r(427),r(428),r(429),r(430),r(431),r(432),r(433),r(434),r(435),r(436),r(68);var n=r(402),i=r(35),o=r(34),a=r(29),c=r(16),u=r(19),f=r(532);function l(t){var e=function(){if(\"undefined\"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if(\"function\"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var r,n=Object(c.a)(t);if(e){var i=Object(c.a)(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return Object(a.a)(this,r)}}function s(t,e){var r;if(\"undefined\"==typeof Symbol||null==t[Symbol.iterator]){if(Array.isArray(t)||(r=function(t,e){if(!t)return;if(\"string\"==typeof t)return d(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);\"Object\"===r&&t.constructor&&(r=t.constructor.name);if(\"Map\"===r||\"Set\"===r)return Array.from(t);if(\"Arguments\"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return d(t,e)}(t))||e&&t&&\"number\"==typeof t.length){r&&(t=r);var n=0,i=function(){};return{s:i,n:function(){return n>=t.length?{done:!0}:{done:!1,value:t[n++]}},e:function(t){throw t},f:i}}throw new TypeError(\"Invalid attempt to iterate non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\")}var o,a=!0,c=!1;return{s:function(){r=t[Symbol.iterator]()},n:function(){var t=r.next();return a=t.done,t},e:function(t){c=!0,o=t},f:function(){try{a||null==r.return||r.return()}finally{if(c)throw o}}}}function d(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}var y=function t(e,r,n){Object(u.a)(this,t);var i,o=s(e);try{for(o.s();!(i=o.n()).done;){var a,c=i.value,f=s(r);try{for(f.s();!(a=f.n()).done;){var l=a.value;if(c.fileId===l.fileId){c.label=l.label,c.schemaId=l.schemaId;var d,y=s(n);try{for(y.s();!(d=y.n()).done;){var h=d.value;l.schemaId===h.id&&(c.isLeaf=h.metadata.isLeaf)}}catch(t){y.e(t)}finally{y.f()}}}}catch(t){f.e(t)}finally{f.f()}}}catch(t){o.e(t)}finally{o.f()}return e},h=function t(e){Object(u.a)(this,t),this.directoryCopy=JSON.parse(JSON.stringify(e))},p=function(t){Object(o.a)(r,t);var e=l(r);function r(){return Object(u.a)(this,r),e.apply(this,arguments)}return Object(i.a)(r,[{key:\"unflattenTree\",value:function(t){function e(t,e){var r=t.position,n=e.position,i=0;return r>n?i=1:r<n&&(i=-1),i}return function(t){for(var r,n,i=[],o={},a=0,c=t.length;a<c;a++)o[(r=t[a]).id]=r,o[r.id].children=[];for(var u in o)Object.prototype.hasOwnProperty.call(o,u)&&((n=o[u]).parentId?o[n.parentId]&&(o[n.parentId].children.push(n),o[n.parentId].children.sort(e)):(i.push(n),i.sort(e)));return i}(t)}}]),r}(h),v=function(t){Object(o.a)(r,t);var e=l(r);function r(t,n,i){var o;Object(u.a)(this,r),o=e.call(this,t);var a=JSON.stringify(o.directoryCopy);o.orphanedFiles=[];var c,f=s(n);try{var l=function(){var t=c.value;if(!a.includes(t.fileId)){t.id=t.fileId;var e=i.find((function(e){return e.id===t.schemaId}));t.isLeaf=e.metadata.isLeaf,o.orphanedFiles.push(t)}};for(f.s();!(c=f.n()).done;)l()}catch(t){f.e(t)}finally{f.f()}return o}return r}(h),b=function(t){Object(o.a)(r,t);var e=l(r);function r(){return Object(u.a)(this,r),e.apply(this,arguments)}return Object(i.a)(r,[{key:\"changeVisibility\",value:function(t){var e=this.directoryCopy.find((function(e){return e.id===t}));e.isVisible=!e.isVisible}},{key:\"changeName\",value:function(t,e){var r,n=s(this.directoryCopy.filter((function(e){return e.fileId===t})));try{for(n.s();!(r=n.n()).done;){r.value.label=e}}catch(t){n.e(t)}finally{n.f()}}}]),r}(h),m=function(t){Object(o.a)(r,t);var e=l(r);function r(){return Object(u.a)(this,r),e.apply(this,arguments)}return Object(i.a)(r,[{key:\"getParentOfEntity\",value:function(t){if(t.parentId)return this.directoryCopy.find((function(e){return e.id===t.parentId}));var e=this.directoryCopy.find((function(e){return e.id===t.id}));return this.directoryCopy.find((function(t){return t.id===e.parentId}))}},{key:\"getAllParentsToFile\",value:function(t){var e,r=this,n=[],i=s(this.directoryCopy.filter((function(e){return e.fileId===t})));try{for(i.s();!(e=i.n()).done;){var o=e.value;n.push(o.parentId)}}catch(t){i.e(t)}finally{i.f()}var a=[];if(n.length>0){var c,u=s(n);try{var f=function(){var t=c.value,e=r.directoryCopy.find((function(e){return e.id===t}));e&&a.push(e.id)};for(u.s();!(c=u.n()).done;)f()}catch(t){u.e(t)}finally{u.f()}}return a}}]),r}(h),O=function(t){Object(o.a)(r,t);var e=l(r);function r(){return Object(u.a)(this,r),e.apply(this,arguments)}return Object(i.a)(r,[{key:\"moveDown\",value:function(t){var e=this.directoryCopy.find((function(e){return e.id===t})),r=this.directoryCopy.find((function(t){return t.parentId===e.parentId&&t.position===e.position+1}));r&&(e.position=e.position+1,r.position=r.position-1)}},{key:\"moveUp\",value:function(t){var e=this.directoryCopy.find((function(e){return e.id===t})),r=this.directoryCopy.find((function(t){return t.parentId===e.parentId&&t.position===e.position-1}));r&&(e.position=e.position-1,r.position=r.position+1)}}]),r}(h),g=function(t){Object(o.a)(r,t);var e=l(r);function r(t,n){var i;return Object(u.a)(this,r),(i=e.call(this,t)).arrayWithDeletedEntity=i.directoryCopy.filter((function(t){return t.id!==n})),i}return r}(h);var I=function(t){Object(o.a)(r,t);var e=l(r);function r(t){var n;return Object(u.a)(this,r),(n=e.call(this,t)).flatDirectoryWithoutLeaves=n.directoryCopy.filter((function(t){return!1===t.isLeaf})),n}return Object(i.a)(r,[{key:\"unflattenLeavelessTree\",value:function(t){return t?this.unflattenTree(t):this.unflattenTree(this.flatDirectoryWithoutLeaves)}},{key:\"removeEntityByFileId\",value:function(t){return this.flatDirectoryWithoutLeaves.filter((function(e){return e.fileId!==t}))}}]),r}(p),j=function(t){Object(o.a)(r,t);var e=l(r);function r(t,n,i){var o;if(Object(u.a)(this,r),o=e.call(this,t),!n.isLeaf&&o.directoryCopy.some((function(t){return t.fileId===n.fileId}))){o.directoryCopy.find((function(t){return t.fileId===n.fileId})).parentId=i[0]}else{var a=o.directoryCopy.filter((function(t){return i.includes(t.parentId)||t.fileId!==n.fileId})),c=a.filter((function(t){return t.fileId===n.fileId})),l=[];if(c){var d,y=s(c);try{for(y.s();!(d=y.n()).done;){var h=d.value;l.push(h.parentId)}}catch(t){y.e(t)}finally{y.f()}}var p=function(t,e){for(var r=[],n=[],i=0;i<t.length;i++)r[t[i]]=!0;for(var o=0;o<e.length;o++)r[e[o]]?delete r[e[o]]:r[e[o]]=!0;for(var a in r)n.push(a);return n}(l,i);if(p){var v,b=s(p);try{var m=function(){var t=v.value,e=JSON.parse(JSON.stringify(n));e.parentId=t,e.isVisible=!1;var r=a.filter((function(e){return e.parentId===t}));if(r.length>0){var i=Math.max.apply(Math,r.map((function(t){return t.position})));e.position=i+1}else e.position=1;e.id=Object(f.a)(),a.push(e)};for(b.s();!(v=b.n()).done;)m()}catch(t){b.e(t)}finally{b.f()}}o.directoryCopy=a}return o}return r}(h),w=function(t){Object(o.a)(r,t);var e=l(r);function r(){return Object(u.a)(this,r),e.apply(this,arguments)}return Object(i.a)(r,[{key:\"inEntity\",value:function(t){var e,r=1,n=s(this.directoryCopy.filter((function(e){return e.parentId===t})));try{for(n.s();!(e=n.n()).done;){e.value.position=r,r+=1}}catch(t){n.e(t)}finally{n.f()}return this.directoryCopy}}]),r}(h);var D=function(t){Object(o.a)(r,t);var e=l(r);function r(t,i,o){var a;Object(u.a)(this,r);var c,f=[],l=s((a=e.call(this,t)).directoryCopy);try{for(l.s();!(c=l.n()).done;){var d=c.value;i.includes(d.schemaId)&&d.fileId!==o&&f.push(d)}}catch(t){l.e(t)}finally{l.f()}if(f.length>0){var y=function t(e,r){var n,i=[],o=s(e);try{var a=function(){var t=n.value;if(!i.some((function(e){return e.id===t.id}))){var e,o=s(r);try{for(o.s();!(e=o.n()).done;){var a=e.value;\"0\"===a.parentId.toString()||t.id!==a.parentId||i.includes(t)||i.push(t)}}catch(t){o.e(t)}finally{o.f()}}};for(o.s();!(n=o.n()).done;)a()}catch(t){o.e(t)}finally{o.f()}var c=[];return i.length>0&&(c=t(e,i)),i.concat(c)}(a.directoryCopy,f),h=Object(n.a)(new Set(y));a.result=f.concat(h)}else a.result=f;return a}return r}(h)},403:function(t,e,r){\"use strict\";function n(t,e){return e||(e=t.slice(0)),Object.freeze(Object.defineProperties(t,{raw:{value:Object.freeze(e)}}))}r.d(e,\"a\",(function(){return n}))},507:function(t,e,r){var n=r(540);\"string\"==typeof n&&(n=[[t.i,n,\"\"]]),n.locals&&(t.exports=n.locals);(0,r(21).default)(\"322e2968\",n,!0,{sourceMap:!1})},528:function(t,e,r){\"use strict\";r.r(e);r(56);var n,i,o,a=r(403),c=r(3),u=r(102),f=r.n(u),l=r(65),s=r(400);function d(t,e){var r;if(\"undefined\"==typeof Symbol||null==t[Symbol.iterator]){if(Array.isArray(t)||(r=function(t,e){if(!t)return;if(\"string\"==typeof t)return y(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);\"Object\"===r&&t.constructor&&(r=t.constructor.name);if(\"Map\"===r||\"Set\"===r)return Array.from(t);if(\"Arguments\"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return y(t,e)}(t))||e&&t&&\"number\"==typeof t.length){r&&(t=r);var n=0,i=function(){};return{s:i,n:function(){return n>=t.length?{done:!0}:{done:!1,value:t[n++]}},e:function(t){throw t},f:i}}throw new TypeError(\"Invalid attempt to iterate non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\")}var o,a=!0,c=!1;return{s:function(){r=t[Symbol.iterator]()},n:function(){var t=r.next();return a=t.done,t},e:function(t){c=!0,o=t},f:function(){try{a||null==r.return||r.return()}finally{if(c)throw o}}}}function y(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function h(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function p(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?h(Object(r),!0).forEach((function(e){Object(c.a)(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):h(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}var v={props:{files:{type:Array,required:!0},schema:{type:Array,required:!0},editable:{type:Boolean,required:!0},fileClicked:{type:Boolean,required:!0}},data:function(){return{rawDirectory:[],active:[]}},computed:p(p({},Object(l.b)({storeDirectory:\"directory/getDirectory\",databaseDirectory:\"directory/getDatabaseDirectory\",relationshipsFromStore:\"relationship/getRelationships\"})),{},{watchDatabaseDirectory:function(){return this.databaseDirectory},allowEdit:function(){return!this.editable},watchFileClickedInBin:function(){return this.fileClicked},watchClickedFile:function(){return this.active},nestedDirectory:function(){var t=new s.h(this.$store.getters[\"directory/getDirectory\"]);return t.unflattenTree(t.directoryCopy)},watchDirectoryForChanges:function(){return this.storeDirectory}}),watch:{watchDatabaseDirectory:{deep:!0,handler:function(){this.completeDirectory()}},watchDirectoryForChanges:{deep:!0,handler:function(){this.saveDirectory()}},watchClickedFile:{deep:!0,handler:function(){this.active.length>0&&(this.$store.commit(\"directory/assignClickedEntityFileId\",this.active[0].fileId),this.$emit(\"clicked\"))}},watchFileClickedInBin:function(){this.fileClicked||(this.active=[])}},created:function(){var t=this;this.$apollo.query({query:f()(n||(n=Object(a.a)([\"\\n\\t\\t\\t\\tquery {\\n\\t\\t\\t\\t\\tdirectory {\\n\\t\\t\\t\\t\\t\\tid\\n\\t\\t\\t\\t\\t\\thierarchy\\n\\t\\t\\t\\t\\t}\\n\\t\\t\\t\\t}\\n\\t\\t\\t\"])))}).then((function(e){t.$store.commit(\"directory/setDirectoryId\",e.data.directory[0].id),t.$store.commit(\"directory/setDirectoryFromDatabase\",e.data.directory[0].hierarchy)})).catch((function(t){console.log({error:t})}))},methods:{completeDirectory:function(){var t=new s.f(this.databaseDirectory,this.files,this.schema);this.$store.commit(\"directory/setToStoreDirectory\",t)},disableDeleteButton:function(t){return!(this.editable&&!this.storeDirectory.some((function(e){return e.parentId===t.id})))},disableArrowUp:function(t){return!this.editable||1===t.position},disableArrowDown:function(t){var e=this.storeDirectory.filter((function(e){return e.parentId===t.parentId}));return!this.editable||e.length===t.position},changeVisibilityOfEntity:function(t){var e=new s.e(this.$store.getters[\"directory/getDirectory\"]);e.changeVisibility(t.id),this.$store.commit(\"directory/setToStoreDirectory\",e.directoryCopy)},moveDown:function(t){var e=new s.g(this.$store.getters[\"directory/getDirectory\"]);e.moveDown(t.id),this.$store.commit(\"directory/setToStoreDirectory\",e.directoryCopy)},moveUp:function(t){var e=new s.g(this.$store.getters[\"directory/getDirectory\"]);e.moveUp(t.id),this.$store.commit(\"directory/setToStoreDirectory\",e.directoryCopy)},deleteEntity:function(t){var e=new s.b(this.$store.getters[\"directory/getDirectory\"],t.id),r=new s.k(e.arrayWithDeletedEntity).inEntity(t.parentId);this.$store.commit(\"directory/setToStoreDirectory\",r),this.deleteRelationships(t)},saveDirectory:function(){this.$apollo.mutate({variables:{directory:this.$store.getters[\"directory/getDirectory\"]},mutation:f()(i||(i=Object(a.a)([\"\\n\\t\\t\\t\\t\\tmutation(\\n\\t\\t\\t\\t\\t\\t$directory: JSON\\n\\t\\t\\t\\t\\t) {\\n\\t\\t\\t\\t\\t\\tsaveDirectory(\\n\\t\\t\\t\\t\\t\\t\\tdirectory: $directory\\n\\t\\t\\t\\t\\t\\t) {\\n\\t\\t\\t\\t\\t\\t\\tid\\n\\t\\t\\t\\t\\t\\t}\\n\\t\\t\\t\\t\\t}\\n\\t\\t\\t\\t\"])))}).then((function(){})).catch((function(t){console.log({error:t})}))},deleteRelationships:function(t){if(0===this.storeDirectory.filter((function(e){return e.fileId===t.fileId})).length){var e,r=[],n=d(this.relationshipsFromStore.filter((function(e){return e.fileId===t.fileId})));try{for(n.s();!(e=n.n()).done;){var i=e.value;r.push(i.relationshipId)}}catch(t){n.e(t)}finally{n.f()}this.$apollo.mutate({variables:{data:r},mutation:f()(o||(o=Object(a.a)([\"\\n\\t\\t\\t\\t\\t\\tmutation (\\n\\t\\t\\t\\t\\t\\t\\t$data: JSON\\n\\t\\t\\t\\t\\t\\t) {\\n\\t\\t\\t\\t\\t\\t\\tdeleteRelationships (\\n\\t\\t\\t\\t\\t\\t\\t\\tdata: $data\\n\\t\\t\\t\\t\\t\\t\\t)\\n\\t\\t\\t\\t\\t\\t}\\n\\t\\t\\t\\t\\t\"])))}).then((function(){})).catch((function(t){console.log({error:t})}))}},clickedOrphanedFile:function(){this.active=[]}}},b=(r(539),r(55)),m=r(67),O=r.n(m),g=r(385),I=r(596),j=Object(b.a)(v,(function(){var t=this,e=t.$createElement,r=t._self._c||e;return r(\"div\",[r(\"div\",[r(\"v-treeview\",{attrs:{items:t.nestedDirectory,active:t.active,activatable:\"\",\"return-object\":\"\"},on:{\"update:active\":function(e){t.active=e}},scopedSlots:t._u([{key:\"prepend\",fn:function(e){var n=e.item,i=e.open;return[!1===n.isLeaf?r(\"v-icon\",[t._v(\"\\n\\t\\t\\t\\t\\t\"+t._s(i?\"mdi-folder-open\":\"mdi-folder\")+\"\\n\\t\\t\\t\\t\")]):!0===n.isLeaf?r(\"v-icon\",[t._v(\"\\n\\t\\t\\t\\t\\tmdi-file\\n\\t\\t\\t\\t\")]):r(\"v-icon\",[t._v(\"\\n\\t\\t\\t\\t\\tmdi-alert-circle\\n\\t\\t\\t\\t\")])]}},{key:\"label\",fn:function(e){var n=e.item;return[n.label?r(\"div\",{staticClass:\"entity_label\"},[t._v(\"\\n\\t\\t\\t\\t\\t\"+t._s(n.label)+\"\\n\\t\\t\\t\\t\")]):r(\"div\",[t._v(\"\\n\\t\\t\\t\\t\\tDATEI NICHT GEFUNDEN\\n\\t\\t\\t\\t\")])]}},{key:\"append\",fn:function(e){var n=e.item;return[r(\"v-icon\",{attrs:{disabled:t.disableDeleteButton(n)},on:{click:function(e){return t.deleteEntity(n)}}},[t._v(\"\\n\\t\\t\\t\\t\\tmdi-delete\\n\\t\\t\\t\\t\")]),t._v(\" \"),r(\"v-icon\",{attrs:{disabled:t.disableArrowDown(n)},on:{click:function(e){return t.moveDown(n)}}},[t._v(\"\\n\\t\\t\\t\\t\\tmdi-arrow-down-bold\\n\\t\\t\\t\\t\")]),t._v(\" \"),r(\"v-icon\",{attrs:{disabled:t.disableArrowUp(n)},on:{click:function(e){return t.moveUp(n)}}},[t._v(\"\\n\\t\\t\\t\\t\\tmdi-arrow-up-bold\\n\\t\\t\\t\\t\")]),t._v(\" \"),n.isVisible?r(\"v-icon\",{attrs:{disabled:t.allowEdit},on:{click:function(e){return t.changeVisibilityOfEntity(n)}}},[t._v(\"\\n\\t\\t\\t\\t\\tmdi-eye\\n\\t\\t\\t\\t\")]):r(\"v-icon\",{attrs:{disabled:t.allowEdit},on:{click:function(e){return t.changeVisibilityOfEntity(n)}}},[t._v(\"\\n\\t\\t\\t\\t\\tmdi-eye-off\\n\\t\\t\\t\\t\")])]}}])})],1)])}),[],!1,null,null,null);e.default=j.exports;O()(j,{VIcon:g.a,VTreeview:I.a})},539:function(t,e,r){\"use strict\";r(507)},540:function(t,e,r){var n=r(20)(!1);n.push([t.i,\".entity_label{padding-left:15px}\",\"\"]),t.exports=n}}]);","extractedComments":[]}