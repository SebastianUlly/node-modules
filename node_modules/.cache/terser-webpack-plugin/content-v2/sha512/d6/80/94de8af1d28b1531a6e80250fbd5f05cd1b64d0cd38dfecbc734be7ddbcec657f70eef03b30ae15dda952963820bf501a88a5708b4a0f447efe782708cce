{"code":"webpackHotUpdate(\"app\",{\"./middleware/auth.ts\":function(module,__webpack_exports__,__webpack_require__){\"use strict\";eval(\"__webpack_require__.r(__webpack_exports__);\\n/* harmony import */ var core_js_modules_es_array_includes_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! core-js/modules/es.array.includes.js */ \\\"./node_modules/core-js/modules/es.array.includes.js\\\");\\n/* harmony import */ var core_js_modules_es_array_includes_js__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_es_array_includes_js__WEBPACK_IMPORTED_MODULE_0__);\\n/* harmony import */ var core_js_modules_es_regexp_exec_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! core-js/modules/es.regexp.exec.js */ \\\"./node_modules/core-js/modules/es.regexp.exec.js\\\");\\n/* harmony import */ var core_js_modules_es_regexp_exec_js__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_es_regexp_exec_js__WEBPACK_IMPORTED_MODULE_1__);\\n/* harmony import */ var core_js_modules_es_string_includes_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! core-js/modules/es.string.includes.js */ \\\"./node_modules/core-js/modules/es.string.includes.js\\\");\\n/* harmony import */ var core_js_modules_es_string_includes_js__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_es_string_includes_js__WEBPACK_IMPORTED_MODULE_2__);\\n/* harmony import */ var core_js_modules_es_string_replace_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! core-js/modules/es.string.replace.js */ \\\"./node_modules/core-js/modules/es.string.replace.js\\\");\\n/* harmony import */ var core_js_modules_es_string_replace_js__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_es_string_replace_js__WEBPACK_IMPORTED_MODULE_3__);\\n/* harmony import */ var core_js_modules_es_string_split_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! core-js/modules/es.string.split.js */ \\\"./node_modules/core-js/modules/es.string.split.js\\\");\\n/* harmony import */ var core_js_modules_es_string_split_js__WEBPACK_IMPORTED_MODULE_4___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_es_string_split_js__WEBPACK_IMPORTED_MODULE_4__);\\n/* harmony import */ var js_cookie__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! js-cookie */ \\\"./node_modules/js-cookie/src/js.cookie.js\\\");\\n/* harmony import */ var js_cookie__WEBPACK_IMPORTED_MODULE_5___default = /*#__PURE__*/__webpack_require__.n(js_cookie__WEBPACK_IMPORTED_MODULE_5__);\\n\\n\\n\\n\\n\\n\\n/* harmony default export */ __webpack_exports__[\\\"default\\\"] = (function (ctx) {\\n  // checking if the user is allowed to access this route | passing as argument the elementId in meta of this route\\n  if (!isAuth(ctx.route.meta[0].elementId)) {\\n    // if the user is not allowed --\\x3e redirecting to the startpage\\n    return ctx.redirect('/');\\n  }\\n});\\n\\nfunction isAuth(elementId) {\\n  // getting the token from the cookies\\n  var token = js_cookie__WEBPACK_IMPORTED_MODULE_5___default.a.get('apollo-token'); // if a token is found\\n\\n  if (token) {\\n    // extracting the encoded payload from the token\\n    var base64Url = token.split('.')[1]; // replacing characters in the encoded payload\\n\\n    var base64 = base64Url.replace('-', '+').replace('_', '/'); // decoding and parsing the payload into a JSON-object\\n\\n    var payload = JSON.parse(window.atob(base64)); // checking if the elementId is in the array for the alloedElements\\n\\n    if (payload.allowed_elements.includes(elementId)) {\\n      return true;\\n    }\\n  } // if the token doesn't exist at the moment when the function is called, or the elementId is not in the allowed-elements-array --\\x3e returning false\\n\\n\\n  return true;\\n}//# sourceURL=[module]\\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9taWRkbGV3YXJlL2F1dGgudHMuanMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9taWRkbGV3YXJlL2F1dGgudHM/MTZlZSJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgQ29va2llIGZyb20gJ2pzLWNvb2tpZSdcclxuXHJcbmV4cG9ydCBkZWZhdWx0IChjdHg6IHsgcmVkaXJlY3Q6IGFueSwgcm91dGU6IGFueX0pID0+IHtcclxuXHQvLyBjaGVja2luZyBpZiB0aGUgdXNlciBpcyBhbGxvd2VkIHRvIGFjY2VzcyB0aGlzIHJvdXRlIHwgcGFzc2luZyBhcyBhcmd1bWVudCB0aGUgZWxlbWVudElkIGluIG1ldGEgb2YgdGhpcyByb3V0ZVxyXG5cdGlmICghaXNBdXRoKGN0eC5yb3V0ZS5tZXRhWzBdLmVsZW1lbnRJZCkpIHtcclxuXHRcdC8vIGlmIHRoZSB1c2VyIGlzIG5vdCBhbGxvd2VkIC0tPiByZWRpcmVjdGluZyB0byB0aGUgc3RhcnRwYWdlXHJcblx0XHRyZXR1cm4gY3R4LnJlZGlyZWN0KCcvJylcclxuXHR9XHJcbn1cclxuXHJcbmZ1bmN0aW9uIGlzQXV0aCAoZWxlbWVudElkOiBzdHJpbmcpIHtcclxuXHQvLyBnZXR0aW5nIHRoZSB0b2tlbiBmcm9tIHRoZSBjb29raWVzXHJcblx0Y29uc3QgdG9rZW4gPSBDb29raWUuZ2V0KCdhcG9sbG8tdG9rZW4nKVxyXG5cdC8vIGlmIGEgdG9rZW4gaXMgZm91bmRcclxuXHRpZiAodG9rZW4pIHtcclxuXHRcdC8vIGV4dHJhY3RpbmcgdGhlIGVuY29kZWQgcGF5bG9hZCBmcm9tIHRoZSB0b2tlblxyXG5cdFx0Y29uc3QgYmFzZTY0VXJsID0gdG9rZW4uc3BsaXQoJy4nKVsxXVxyXG5cdFx0Ly8gcmVwbGFjaW5nIGNoYXJhY3RlcnMgaW4gdGhlIGVuY29kZWQgcGF5bG9hZFxyXG5cdFx0Y29uc3QgYmFzZTY0ID0gYmFzZTY0VXJsLnJlcGxhY2UoJy0nLCAnKycpLnJlcGxhY2UoJ18nLCAnLycpXHJcblx0XHQvLyBkZWNvZGluZyBhbmQgcGFyc2luZyB0aGUgcGF5bG9hZCBpbnRvIGEgSlNPTi1vYmplY3RcclxuXHRcdGNvbnN0IHBheWxvYWQgPSBKU09OLnBhcnNlKHdpbmRvdy5hdG9iKGJhc2U2NCkpXHJcblxyXG5cdFx0Ly8gY2hlY2tpbmcgaWYgdGhlIGVsZW1lbnRJZCBpcyBpbiB0aGUgYXJyYXkgZm9yIHRoZSBhbGxvZWRFbGVtZW50c1xyXG5cdFx0aWYgKHBheWxvYWQuYWxsb3dlZF9lbGVtZW50cy5pbmNsdWRlcyhlbGVtZW50SWQpKSB7XHJcblx0XHRcdHJldHVybiB0cnVlXHJcblx0XHR9XHJcblx0fVxyXG5cdC8vIGlmIHRoZSB0b2tlbiBkb2Vzbid0IGV4aXN0IGF0IHRoZSBtb21lbnQgd2hlbiB0aGUgZnVuY3Rpb24gaXMgY2FsbGVkLCBvciB0aGUgZWxlbWVudElkIGlzIG5vdCBpbiB0aGUgYWxsb3dlZC1lbGVtZW50cy1hcnJheSAtLT4gcmV0dXJuaW5nIGZhbHNlXHJcblx0cmV0dXJuIHRydWVcclxufVxyXG4iXSwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQUFBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0EiLCJzb3VyY2VSb290IjoiIn0=\\n//# sourceURL=webpack-internal:///./middleware/auth.ts\\n\")}});","extractedComments":["/*!****************************!*\\\n  !*** ./middleware/auth.ts ***!\n  \\****************************/","/*! exports provided: default */"]}