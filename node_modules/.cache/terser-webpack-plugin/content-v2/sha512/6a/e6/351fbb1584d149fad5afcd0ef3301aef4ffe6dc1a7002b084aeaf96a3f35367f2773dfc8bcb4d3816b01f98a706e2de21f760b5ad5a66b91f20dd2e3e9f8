{"code":"(window.webpackJsonp=window.webpackJsonp||[]).push([[22,8],{400:function(t,e,n){\"use strict\";n.d(e,\"f\",(function(){return y})),n.d(e,\"h\",(function(){return h})),n.d(e,\"e\",(function(){return b})),n.d(e,\"g\",(function(){return m})),n.d(e,\"b\",(function(){return j})),n.d(e,\"i\",(function(){return v})),n.d(e,\"j\",(function(){return O})),n.d(e,\"d\",(function(){return g})),n.d(e,\"a\",(function(){return I})),n.d(e,\"k\",(function(){return w})),n.d(e,\"c\",(function(){return C}));n(27),n(56),n(99),n(47),n(49),n(15),n(69),n(420),n(66),n(74),n(421),n(422),n(423),n(424),n(425),n(426),n(427),n(428),n(429),n(430),n(431),n(432),n(433),n(434),n(435),n(436),n(68);var r=n(402),i=n(35),o=n(34),a=n(29),c=n(16),u=n(19),f=n(532);function l(t){var e=function(){if(\"undefined\"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if(\"function\"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=Object(c.a)(t);if(e){var i=Object(c.a)(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return Object(a.a)(this,n)}}function s(t,e){var n;if(\"undefined\"==typeof Symbol||null==t[Symbol.iterator]){if(Array.isArray(t)||(n=function(t,e){if(!t)return;if(\"string\"==typeof t)return d(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);\"Object\"===n&&t.constructor&&(n=t.constructor.name);if(\"Map\"===n||\"Set\"===n)return Array.from(t);if(\"Arguments\"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return d(t,e)}(t))||e&&t&&\"number\"==typeof t.length){n&&(t=n);var r=0,i=function(){};return{s:i,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:i}}throw new TypeError(\"Invalid attempt to iterate non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\")}var o,a=!0,c=!1;return{s:function(){n=t[Symbol.iterator]()},n:function(){var t=n.next();return a=t.done,t},e:function(t){c=!0,o=t},f:function(){try{a||null==n.return||n.return()}finally{if(c)throw o}}}}function d(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}var y=function t(e,n,r){Object(u.a)(this,t);var i,o=s(e);try{for(o.s();!(i=o.n()).done;){var a,c=i.value,f=s(n);try{for(f.s();!(a=f.n()).done;){var l=a.value;if(c.fileId===l.fileId){c.label=l.label,c.schemaId=l.schemaId;var d,y=s(r);try{for(y.s();!(d=y.n()).done;){var p=d.value;l.schemaId===p.id&&(c.isLeaf=p.metadata.isLeaf)}}catch(t){y.e(t)}finally{y.f()}}}}catch(t){f.e(t)}finally{f.f()}}}catch(t){o.e(t)}finally{o.f()}return e},p=function t(e){Object(u.a)(this,t),this.directoryCopy=JSON.parse(JSON.stringify(e))},h=function(t){Object(o.a)(n,t);var e=l(n);function n(){return Object(u.a)(this,n),e.apply(this,arguments)}return Object(i.a)(n,[{key:\"unflattenTree\",value:function(t){function e(t,e){var n=t.position,r=e.position,i=0;return n>r?i=1:n<r&&(i=-1),i}return function(t){for(var n,r,i=[],o={},a=0,c=t.length;a<c;a++)o[(n=t[a]).id]=n,o[n.id].children=[];for(var u in o)Object.prototype.hasOwnProperty.call(o,u)&&((r=o[u]).parentId?o[r.parentId]&&(o[r.parentId].children.push(r),o[r.parentId].children.sort(e)):(i.push(r),i.sort(e)));return i}(t)}}]),n}(p),v=function(t){Object(o.a)(n,t);var e=l(n);function n(t,r,i){var o;Object(u.a)(this,n),o=e.call(this,t);var a=JSON.stringify(o.directoryCopy);o.orphanedFiles=[];var c,f=s(r);try{var l=function(){var t=c.value;if(!a.includes(t.fileId)){t.id=t.fileId;var e=i.find((function(e){return e.id===t.schemaId}));t.isLeaf=e.metadata.isLeaf,o.orphanedFiles.push(t)}};for(f.s();!(c=f.n()).done;)l()}catch(t){f.e(t)}finally{f.f()}return o}return n}(p),b=function(t){Object(o.a)(n,t);var e=l(n);function n(){return Object(u.a)(this,n),e.apply(this,arguments)}return Object(i.a)(n,[{key:\"changeVisibility\",value:function(t){var e=this.directoryCopy.find((function(e){return e.id===t}));e.isVisible=!e.isVisible}},{key:\"changeName\",value:function(t,e){var n,r=s(this.directoryCopy.filter((function(e){return e.fileId===t})));try{for(r.s();!(n=r.n()).done;){n.value.label=e}}catch(t){r.e(t)}finally{r.f()}}}]),n}(p),O=function(t){Object(o.a)(n,t);var e=l(n);function n(){return Object(u.a)(this,n),e.apply(this,arguments)}return Object(i.a)(n,[{key:\"getParentOfEntity\",value:function(t){if(t.parentId)return this.directoryCopy.find((function(e){return e.id===t.parentId}));var e=this.directoryCopy.find((function(e){return e.id===t.id}));return this.directoryCopy.find((function(t){return t.id===e.parentId}))}},{key:\"getAllParentsToFile\",value:function(t){var e,n=this,r=[],i=s(this.directoryCopy.filter((function(e){return e.fileId===t})));try{for(i.s();!(e=i.n()).done;){var o=e.value;r.push(o.parentId)}}catch(t){i.e(t)}finally{i.f()}var a=[];if(r.length>0){var c,u=s(r);try{var f=function(){var t=c.value,e=n.directoryCopy.find((function(e){return e.id===t}));e&&a.push(e.id)};for(u.s();!(c=u.n()).done;)f()}catch(t){u.e(t)}finally{u.f()}}return a}}]),n}(p),m=function(t){Object(o.a)(n,t);var e=l(n);function n(){return Object(u.a)(this,n),e.apply(this,arguments)}return Object(i.a)(n,[{key:\"moveDown\",value:function(t){var e=this.directoryCopy.find((function(e){return e.id===t})),n=this.directoryCopy.find((function(t){return t.parentId===e.parentId&&t.position===e.position+1}));n&&(e.position=e.position+1,n.position=n.position-1)}},{key:\"moveUp\",value:function(t){var e=this.directoryCopy.find((function(e){return e.id===t})),n=this.directoryCopy.find((function(t){return t.parentId===e.parentId&&t.position===e.position-1}));n&&(e.position=e.position-1,n.position=n.position+1)}}]),n}(p),j=function(t){Object(o.a)(n,t);var e=l(n);function n(t,r){var i;return Object(u.a)(this,n),(i=e.call(this,t)).arrayWithDeletedEntity=i.directoryCopy.filter((function(t){return t.id!==r})),i}return n}(p);var g=function(t){Object(o.a)(n,t);var e=l(n);function n(t){var r;return Object(u.a)(this,n),(r=e.call(this,t)).flatDirectoryWithoutLeaves=r.directoryCopy.filter((function(t){return!1===t.isLeaf})),r}return Object(i.a)(n,[{key:\"unflattenLeavelessTree\",value:function(t){return t?this.unflattenTree(t):this.unflattenTree(this.flatDirectoryWithoutLeaves)}},{key:\"removeEntityByFileId\",value:function(t){return this.flatDirectoryWithoutLeaves.filter((function(e){return e.fileId!==t}))}}]),n}(h),I=function(t){Object(o.a)(n,t);var e=l(n);function n(t,r,i){var o;if(Object(u.a)(this,n),o=e.call(this,t),!r.isLeaf&&o.directoryCopy.some((function(t){return t.fileId===r.fileId}))){o.directoryCopy.find((function(t){return t.fileId===r.fileId})).parentId=i[0]}else{var a=o.directoryCopy.filter((function(t){return i.includes(t.parentId)||t.fileId!==r.fileId})),c=a.filter((function(t){return t.fileId===r.fileId})),l=[];if(c){var d,y=s(c);try{for(y.s();!(d=y.n()).done;){var p=d.value;l.push(p.parentId)}}catch(t){y.e(t)}finally{y.f()}}var h=function(t,e){for(var n=[],r=[],i=0;i<t.length;i++)n[t[i]]=!0;for(var o=0;o<e.length;o++)n[e[o]]?delete n[e[o]]:n[e[o]]=!0;for(var a in n)r.push(a);return r}(l,i);if(h){var v,b=s(h);try{var O=function(){var t=v.value,e=JSON.parse(JSON.stringify(r));e.parentId=t,e.isVisible=!1;var n=a.filter((function(e){return e.parentId===t}));if(n.length>0){var i=Math.max.apply(Math,n.map((function(t){return t.position})));e.position=i+1}else e.position=1;e.id=Object(f.a)(),a.push(e)};for(b.s();!(v=b.n()).done;)O()}catch(t){b.e(t)}finally{b.f()}}o.directoryCopy=a}return o}return n}(p),w=function(t){Object(o.a)(n,t);var e=l(n);function n(){return Object(u.a)(this,n),e.apply(this,arguments)}return Object(i.a)(n,[{key:\"inEntity\",value:function(t){var e,n=1,r=s(this.directoryCopy.filter((function(e){return e.parentId===t})));try{for(r.s();!(e=r.n()).done;){e.value.position=n,n+=1}}catch(t){r.e(t)}finally{r.f()}return this.directoryCopy}}]),n}(p);var C=function(t){Object(o.a)(n,t);var e=l(n);function n(t,i,o){var a;Object(u.a)(this,n);var c,f=[],l=s((a=e.call(this,t)).directoryCopy);try{for(l.s();!(c=l.n()).done;){var d=c.value;i.includes(d.schemaId)&&d.fileId!==o&&f.push(d)}}catch(t){l.e(t)}finally{l.f()}if(f.length>0){var y=function t(e,n){var r,i=[],o=s(e);try{var a=function(){var t=r.value;if(!i.some((function(e){return e.id===t.id}))){var e,o=s(n);try{for(o.s();!(e=o.n()).done;){var a=e.value;\"0\"===a.parentId.toString()||t.id!==a.parentId||i.includes(t)||i.push(t)}}catch(t){o.e(t)}finally{o.f()}}};for(o.s();!(r=o.n()).done;)a()}catch(t){o.e(t)}finally{o.f()}var c=[];return i.length>0&&(c=t(e,i)),i.concat(c)}(a.directoryCopy,f),p=Object(r.a)(new Set(y));a.result=f.concat(p)}else a.result=f;return a}return n}(p)},403:function(t,e,n){\"use strict\";function r(t,e){return e||(e=t.slice(0)),Object.freeze(Object.defineProperties(t,{raw:{value:Object.freeze(e)}}))}n.d(e,\"a\",(function(){return r}))},498:function(t,e,n){\"use strict\";n.r(e);var r,i,o=n(403),a=n(3),c=n(102),u=n.n(c),f=n(65),l=n(400);function s(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function d(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?s(Object(n),!0).forEach((function(e){Object(a.a)(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):s(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var y={props:{files:{type:Array,required:!0},schema:{type:Array,required:!0},editable:{type:Boolean,required:!0},fileClicked:{type:Boolean,required:!0}},data:function(){return{active:[],orphanDirectory:[]}},computed:d(d({},Object(f.b)({storeDirectory:\"directory/getDirectory\"})),{},{watchFiles:function(){return this.files},watchClickedFile:function(){return this.active},watchFileClicked:function(){return this.fileClicked},watchDirectory:function(){return this.storeDirectory}}),watch:{watchClickedFile:{deep:!0,handler:function(){this.active.length>0&&(this.$store.commit(\"directory/assignClickedEntityFileId\",this.active[0].fileId),this.$emit(\"clicked\"))}},watchFileClicked:function(){this.fileClicked||(this.active=[])},watchFiles:{deep:!0,handler:function(t){this.getOrphanDirectory(t)}},watchDirectory:{deep:!0,handler:function(){this.getOrphanDirectory(this.files)}}},mounted:function(){this.getOrphanDirectory(this.files)},methods:{getOrphanDirectory:function(t){var e=new l.i(this.storeDirectory,t,this.schema);console.log(e),this.orphanDirectory=[{id:\"orphan\",root:!0,label:\"Papierkorb\",children:e.orphanedFiles}]},deleteFile:function(t){var e=this;console.log(t),this.$apollo.mutate({variables:{fileId:t.fileId},mutation:u()(r||(r=Object(o.a)([\"\\n\\t\\t\\t\\t\\tmutation (\\n\\t\\t\\t\\t\\t\\t$fileId: String\\n\\t\\t\\t\\t\\t) {\\n\\t\\t\\t\\t\\t\\tdeleteFile (\\n\\t\\t\\t\\t\\t\\t\\tfileId: $fileId\\n\\t\\t\\t\\t\\t\\t)\\n\\t\\t\\t\\t\\t}\\n\\t\\t\\t\\t\"])))}).then((function(t){console.log(t),t.data.deleteFile&&e.fetchFiles()})).catch((function(t){console.log({error:t})}))},fetchFiles:function(){var t=this;this.$apollo.query({query:u()(i||(i=Object(o.a)([\"\\n\\t\\t\\t\\t\\tquery {\\n\\t\\t\\t\\t\\t\\tfiles {\\n\\t\\t\\t\\t\\t\\t\\tfileId: id\\n\\t\\t\\t\\t\\t\\t\\tlabel\\n\\t\\t\\t\\t\\t\\t\\tschemaId\\n\\t\\t\\t\\t\\t\\t}\\n\\t\\t\\t\\t\\t}\\n\\t\\t\\t\\t\"])))}).then((function(e){console.log(e),t.getOrphanDirectory(e.data.files)})).catch((function(t){console.log({error:t})}))}}},p=n(55),h=n(67),v=n.n(h),b=n(385),O=n(596),m=Object(p.a)(y,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n(\"div\",[n(\"v-treeview\",{attrs:{items:t.orphanDirectory,active:t.active,activatable:\"\",\"return-object\":\"\"},on:{\"update:active\":function(e){t.active=e}},scopedSlots:t._u([{key:\"prepend\",fn:function(e){var r=e.item,i=e.open;return[r.root?n(\"v-icon\",[t._v(\"\\n\\t\\t\\t\\t\"+t._s(i?\"mdi-delete-empty\":\"mdi-delete\")+\"\\n\\t\\t\\t\")]):r.isLeaf?n(\"v-icon\",[t._v(\"\\n\\t\\t\\t\\tmdi-file\\n\\t\\t\\t\")]):n(\"v-icon\",[t._v(\"\\n\\t\\t\\t\\tmdi-folder\\n\\t\\t\\t\")])]}},{key:\"label\",fn:function(e){var r=e.item;return[n(\"div\",{staticClass:\"entity_name\"},[t._v(\"\\n\\t\\t\\t\\t\"+t._s(r.label)+\"\\n\\t\\t\\t\")])]}},{key:\"append\",fn:function(e){var r=e.item;return[r.fileId?n(\"v-icon\",{attrs:{disabled:!t.editable},on:{click:function(e){return t.deleteFile(r)}}},[t._v(\"\\n\\t\\t\\t\\tmdi-cancel\\n\\t\\t\\t\")]):t._e()]}}])})],1)}),[],!1,null,null,null);e.default=m.exports;v()(m,{VIcon:b.a,VTreeview:O.a})},532:function(t,e,n){\"use strict\";var r,i=new Uint8Array(16);function o(){if(!r&&!(r=\"undefined\"!=typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||\"undefined\"!=typeof msCrypto&&\"function\"==typeof msCrypto.getRandomValues&&msCrypto.getRandomValues.bind(msCrypto)))throw new Error(\"crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported\");return r(i)}var a=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i;for(var c=function(t){return\"string\"==typeof t&&a.test(t)},u=[],f=0;f<256;++f)u.push((f+256).toString(16).substr(1));var l=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=(u[t[e+0]]+u[t[e+1]]+u[t[e+2]]+u[t[e+3]]+\"-\"+u[t[e+4]]+u[t[e+5]]+\"-\"+u[t[e+6]]+u[t[e+7]]+\"-\"+u[t[e+8]]+u[t[e+9]]+\"-\"+u[t[e+10]]+u[t[e+11]]+u[t[e+12]]+u[t[e+13]]+u[t[e+14]]+u[t[e+15]]).toLowerCase();if(!c(n))throw TypeError(\"Stringified UUID is invalid\");return n};e.a=function(t,e,n){var r=(t=t||{}).random||(t.rng||o)();if(r[6]=15&r[6]|64,r[8]=63&r[8]|128,e){n=n||0;for(var i=0;i<16;++i)e[n+i]=r[i];return e}return l(r)}}}]);","extractedComments":[]}